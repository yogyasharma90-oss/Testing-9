<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Decorate Your Cake ðŸŽ‚</title>
<style>
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: #ffe6e6;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  #cakeArea {
    position: relative;
    width: 400px;
    margin-top: 50px;
  }

  .cake {
    width: 100%;
    display: block;
  }

  #toppingsLayer, #candlesLayer {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
  }

  .topping, .candle {
    position: absolute;
  }

  #panel {
    margin-top: 20px;
    background: #fff0f6;
    padding: 15px;
    border-radius: 10px;
    width: 400px;
    box-shadow: 0 0 15px rgba(0,0,0,0.2);
  }

  .btn {
    margin: 5px;
    padding: 8px 14px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    background: hotpink;
    color: white;
    font-weight: bold;
    transition: 0.2s;
  }

  .btn:hover {
    transform: scale(1.05);
  }

  #actionButton {
    margin-top: 20px;
    padding: 12px 20px;
    background: #ff66aa;
    color: white;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    font-size: 18px;
    display: none;
  }

</style>
</head>
<body>

<div id="cakeArea">
  <img src="chococake.png" class="cake" alt="Cake">
  <div id="toppingsLayer"></div>
  <div id="candlesLayer"></div>
</div>

<div id="panel">
  <h3 id="panelTitle">Decoration Panel</h3>
  <div id="panelContent">
    <button class="btn" onclick="openToppings()">Toppings</button>
    <button class="btn" onclick="openCandles()">Candles</button>
  </div>
</div>

<button id="actionButton" onclick="confettiCelebration()">Finish & Celebrate ðŸŽ‰</button>

<script>
const panelTitle = document.getElementById('panelTitle');
const panelContent = document.getElementById('panelContent');
const actionButton = document.getElementById('actionButton');

// ---------------- TOPPINGS ----------------
function openToppings(){
  panelTitle.innerText="Toppings";
  panelContent.innerHTML=`
    <button class="btn" onclick="addTopping('strawberry.png')">Strawberry</button>
    <button class="btn" onclick="addTopping('blueberry.png')">Blueberry</button>
    <button class="btn" onclick="addTopping('cherry.png')">Cherry</button>
    <button class="btn" onclick="addTopping('oreo.png')">Oreos</button>
    <button class="btn" onclick="addTopping('sprinkles.png')">Sprinkles</button>
    <button class="btn" onclick="backToMain()">Back</button>
    <button class="btn" onclick="resetLayer('toppingsLayer')">Reset</button>
  `;
}

function addTopping(name){
  const layer = document.getElementById('toppingsLayer');
  const img = document.createElement('img');
  img.src = name;
  img.className = 'topping';
  img.style.width = '50px';
  // evenly spread around cake (4 corners)
  const positions = [
    {top:'10%', left:'10%'},
    {top:'10%', left:'70%'},
    {top:'60%', left:'10%'},
    {top:'60%', left:'70%'}
  ];
  positions.forEach(pos=>{
    const t = img.cloneNode();
    t.style.top = pos.top;
    t.style.left = pos.left;
    layer.appendChild(t);
  });
}

// ---------------- CANDLES ----------------
function openCandles(){
  panelTitle.innerText="Candles";
  panelContent.innerHTML=`
    <button class="btn" onclick="addCandle('candle_simple.png')">Simple Candle</button>
    <button class="btn" onclick="addCandle('candle_heart.png')">Heart Candle</button>
    <button class="btn" onclick="addCandle('candle_age.png')">Age Candle</button>
    <button class="btn" onclick="backToMain()">Back</button>
    <button class="btn" onclick="resetLayer('candlesLayer')">Reset</button>
  `;
}

function addCandle(name){
  const layer = document.getElementById('candlesLayer');
  const img = document.createElement('img');
  img.src = name;
  img.className = 'candle';
  img.style.width = '40px';
  if(name==='candle_age.png'){
    img.style.top='20%';
    img.style.left='45%';
    layer.appendChild(img);
  } else {
    const positions = [
      {top:'10%', left:'10%'},
      {top:'10%', left:'70%'}
    ];
    positions.forEach(pos=>{
      const c = img.cloneNode();
      c.style.top = pos.top;
      c.style.left = pos.left;
      layer.appendChild(c);
    });
  }
}

// ---------------- BACK & RESET ----------------
function backToMain(){
  panelTitle.innerText="Decoration Panel";
  panelContent.innerHTML=`
    <button class="btn" onclick="openToppings()">Toppings</button>
    <button class="btn" onclick="openCandles()">Candles</button>
    <button class="btn" onclick="actionButton.style.display='block'">Finish Decoration</button>
  `;
}

function resetLayer(layerId){
  document.getElementById(layerId).innerHTML='';
}

// ---------------- CONFETTI ----------------
function confettiCelebration(){
  actionButton.style.display='none';
  const canvas = document.createElement('canvas');
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  canvas.style.position='fixed';
  canvas.style.top=0;
  canvas.style.left=0;
  canvas.style.pointerEvents='none';
  document.body.appendChild(canvas);
  const ctx = canvas.getContext('2d');
  let particles = [];
  for(let i=0;i<300;i++){
    particles.push({
      x:Math.random()*canvas.width,
      y:Math.random()*-canvas.height,
      vx:(Math.random()*6)-3,
      vy:Math.random()*5+2,
      color: Math.random()>0.5 ? 'gold' : 'silver',
      size: Math.random()*8+4
    });
  }
  function draw(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    particles.forEach(p=>{
      ctx.fillStyle=p.color;
      ctx.fillRect(p.x,p.y,p.size,p.size);
      p.x+=p.vx;
      p.y+=p.vy;
      if(p.y>canvas.height)p.y=-10;
    });
    requestAnimationFrame(draw);
  }
  draw();
  // Show back button after 3 sec
  setTimeout(()=>{
    const backBtn = document.createElement('button');
    backBtn.className='btn';
    backBtn.innerText='Back';
    backBtn.onclick=()=>window.location.href='present.html';
    backBtn.style.marginTop='20px';
    document.body.appendChild(backBtn);
  },3000);
}
</script>

</body>
</html>
